# Nginx + Flask AI èŠå¤©åº”ç”¨

è¿™æ˜¯ä¸€ä¸ªåŸºäº Docker å’Œ Docker Compose éƒ¨ç½²çš„å…¨æ ˆ Web åº”ç”¨ï¼Œé›†æˆäº† AI èŠå¤©åŠŸèƒ½ã€‚é¡¹ç›®ä½¿ç”¨ Nginx ä½œä¸ºåå‘ä»£ç†å’Œ Web æœåŠ¡å™¨ï¼ŒFlask ä½œä¸ºåç«¯æ¡†æ¶ï¼ŒMySQL ä½œä¸ºæ•°æ®åº“ï¼Œå¹¶é›†æˆäº† DeepSeek API æä¾› AI èŠå¤©æœåŠ¡ã€‚æœ¬é¡¹ç›®éƒ¨ç½²åœ°å€:https://guopengfei.top 

## æŠ€æœ¯æ ˆ

### åç«¯
- **Flask 3.0.0**: Python Web æ¡†æ¶
- **SQLAlchemy 2.0.32**: ORM æ•°æ®åº“æ“ä½œ
- **PyMySQL 1.1.1**: MySQL æ•°æ®åº“é©±åŠ¨
- **Gunicorn 21.2.0**: WSGI HTTP æœåŠ¡å™¨

### å‰ç«¯
- **HTML/CSS/JavaScript**: å‰ç«¯æŠ€æœ¯
- **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸

### åŸºç¡€è®¾æ–½
- **Nginx**: åå‘ä»£ç†å’Œ Web æœåŠ¡å™¨
- **MySQL 8.0**: å…³ç³»å‹æ•°æ®åº“
- **Docker & Docker Compose**: å®¹å™¨åŒ–éƒ¨ç½²
- **SSL/HTTPS**: æ”¯æŒ HTTPS åŠ å¯†è®¿é—®

### ç¬¬ä¸‰æ–¹æœåŠ¡
- **DeepSeek API**: AI èŠå¤©æœåŠ¡æä¾›å•†

## é¡¹ç›®ç»“æ„

```
nginx-shop/
â”œâ”€â”€ docker-compose.yml          # Docker Compose é…ç½®æ–‡ä»¶
â”œâ”€â”€ Dockerfile                  # Flask åº”ç”¨é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–åŒ…
â”œâ”€â”€ flask_app/                  # Flask åº”ç”¨ç›®å½•ï¼ˆæ¨¡å—åŒ–æ¶æ„ï¼‰
â”‚   â”œâ”€â”€ __init__.py            # åº”ç”¨å·¥å‚
â”‚   â”œâ”€â”€ app.py                 # åº”ç”¨å¯åŠ¨æ–‡ä»¶
â”‚   â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database.py            # æ•°æ®åº“è¿æ¥ç®¡ç†
â”‚   â”œâ”€â”€ models.py              # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils.py               # è¾…åŠ©å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ routes/                # è·¯ç”±æ¨¡å—ï¼ˆBlueprintï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py            # è®¤è¯è·¯ç”±ï¼ˆç™»å½•/ç™»å‡ºï¼‰
â”‚   â”‚   â”œâ”€â”€ chat.py            # èŠå¤©é¡µé¢è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ dashboard.py       # ä»ªè¡¨æ¿è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ admin.py           # ç®¡ç†åå°è·¯ç”±
â”‚   â”‚   â””â”€â”€ api.py             # API è·¯ç”±
â”‚   â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth_service.py    # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ chat_service.py    # èŠå¤©æœåŠ¡
â”‚   â”‚   â””â”€â”€ stats_service.py   # ç»Ÿè®¡æœåŠ¡
â”‚   â”œâ”€â”€ templates/             # HTML æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ login.html         # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ chat.html          # èŠå¤©é¡µé¢
â”‚   â”‚   â”œâ”€â”€ dashboard.html     # ç”¨æˆ·ä»ªè¡¨æ¿
â”‚   â”‚   â””â”€â”€ admin.html         # ç®¡ç†åå°
â”‚   â””â”€â”€ static/                # é™æ€èµ„æº
â”‚       â””â”€â”€ css/               # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ nginx.conf            # Nginx é…ç½®æ–‡ä»¶
â”œâ”€â”€ mysql/
â”‚   â””â”€â”€ init.sql              # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ ssl/                      # SSL è¯ä¹¦ç›®å½•
â”‚   â””â”€â”€ guopengfei.top/       # åŸŸåè¯ä¹¦æ–‡ä»¶
â”œâ”€â”€ docs/                     # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ éƒ¨ç½²æŒ‡å—.md
â”‚   â”œâ”€â”€ SSLè¯ä¹¦ä½¿ç”¨æŒ‡å—.md
â”‚   â””â”€â”€ ...
â””â”€â”€ scripts/                   # éƒ¨ç½²è„šæœ¬
    â”œâ”€â”€ install.sh
    â””â”€â”€ configure-firewall.sh
```

### æ¶æ„è¯´æ˜

é¡¹ç›®é‡‡ç”¨**æ¨¡å—åŒ–æ¶æ„è®¾è®¡**ï¼Œéµå¾ª Flask æœ€ä½³å®è·µï¼š

- **åº”ç”¨å·¥å‚æ¨¡å¼**: ä½¿ç”¨ `create_app()` å‡½æ•°åˆ›å»ºåº”ç”¨å®ä¾‹ï¼Œä¾¿äºæµ‹è¯•å’Œæ‰©å±•
- **Blueprint è·¯ç”±æ¨¡å—åŒ–**: æŒ‰åŠŸèƒ½å°†è·¯ç”±æ‹†åˆ†åˆ°ä¸åŒæ¨¡å—ï¼ˆauthã€chatã€dashboardã€adminã€apiï¼‰
- **æœåŠ¡å±‚åˆ†ç¦»**: ä¸šåŠ¡é€»è¾‘å°è£…åœ¨ `services/` ç›®å½•ï¼Œå®ç°å…³æ³¨ç‚¹åˆ†ç¦»
- **é…ç½®ç®¡ç†**: é›†ä¸­ç®¡ç†é…ç½®ï¼Œæ”¯æŒå¼€å‘/ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢
- **æ•°æ®åº“æŠ½è±¡**: ç»Ÿä¸€çš„æ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
1. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**
   - ç”¨æˆ·ç™»å½•/ç™»å‡º
   - Session ç®¡ç†
   - ç”¨æˆ·çŠ¶æ€è·Ÿè¸ª

2. **AI èŠå¤©åŠŸèƒ½**
   - é›†æˆ DeepSeek API
   - å®æ—¶å¯¹è¯äº¤äº’
   - Token ä½¿ç”¨ç»Ÿè®¡

3. **ç”¨æˆ·ä»ªè¡¨æ¿**
   - Token ä½¿ç”¨ç»Ÿè®¡ï¼ˆä»Šæ—¥/æœ¬å‘¨/æœ¬æœˆ/æ€»è®¡ï¼‰
   - ä½¿ç”¨è®°å½•æŸ¥çœ‹

4. **ç®¡ç†åå°**
   - API Key ç®¡ç†
   - å…¨å±€ Token ä½¿ç”¨ç»Ÿè®¡
   - ä½¿ç”¨è®°å½•æŸ¥è¯¢

### æŠ€æœ¯ç‰¹æ€§
1. **Nginx åå‘ä»£ç†**
   - HTTPS/SSL æ”¯æŒ
   - HTTP è‡ªåŠ¨é‡å®šå‘åˆ° HTTPS
   - é™æ€æ–‡ä»¶ç¼“å­˜
   - Gzip å‹ç¼©
   - å®‰å…¨å“åº”å¤´

2. **æ•°æ®åº“è®¾è®¡**
   - ç”¨æˆ·è¡¨ï¼ˆusersï¼‰
   - API å¯†é’¥è¡¨ï¼ˆapi_keysï¼‰
   - Token ä½¿ç”¨è®°å½•è¡¨ï¼ˆtoken_usageï¼‰
   - ä»£ç†è®¿é—®æ—¥å¿—è¡¨ï¼ˆproxy_logsï¼‰

3. **å®¹å™¨åŒ–éƒ¨ç½²**
   - å¤šå®¹å™¨æ¶æ„ï¼ˆNginx + Flask + MySQLï¼‰
   - å®¹å™¨é—´ç½‘ç»œé€šä¿¡
   - æ•°æ®æŒä¹…åŒ–

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker (ç‰ˆæœ¬ 20.10+)
- Docker Compose (ç‰ˆæœ¬ 1.29+)
- Python 3.9+ (æœ¬åœ°å¼€å‘éœ€è¦)

### ç¯å¢ƒé…ç½®

1. **é…ç½® SSL è¯ä¹¦**

   å°† SSL è¯ä¹¦æ–‡ä»¶æ”¾ç½®åœ¨ `ssl/guopengfei.top/` ç›®å½•ä¸‹ï¼š
   - `fullchain.crt`: å®Œæ•´è¯ä¹¦é“¾
   - `private.key`: ç§é’¥æ–‡ä»¶

   å¦‚æœä½¿ç”¨å…¶ä»–åŸŸåï¼Œéœ€è¦ä¿®æ”¹ `nginx/nginx.conf` ä¸­çš„åŸŸåé…ç½®ã€‚

2. **é…ç½®æ•°æ®åº“**

   é»˜è®¤æ•°æ®åº“é…ç½®ï¼ˆå¯åœ¨ `docker-compose.yml` ä¸­ä¿®æ”¹ï¼‰ï¼š
   - æ•°æ®åº“å: `nginx_shop`
   - ç”¨æˆ·å: `guopengfei_learning`
   - å¯†ç : `Gpf_learning`

3. **é…ç½® API Key**

   é¦–æ¬¡å¯åŠ¨åï¼Œé€šè¿‡ç®¡ç†åå°é…ç½® DeepSeek API Keyï¼Œæˆ–ç›´æ¥åœ¨æ•°æ®åº“ä¸­æ’å…¥ã€‚

### å¯åŠ¨æœåŠ¡

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰å®¹å™¨
docker-compose up -d

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f flask-app
docker-compose logs -f nginx
docker-compose logs -f mysql

# åœæ­¢æœåŠ¡
docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
docker-compose down -v
```

## å¼€å‘è¯´æ˜

### æœ¬åœ°å¼€å‘

1. **å®‰è£… Python ä¾èµ–**

```bash
pip install -r requirements.txt
```

2. **é…ç½®ç¯å¢ƒå˜é‡**

åˆ›å»º `.env` æ–‡ä»¶æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
export MYSQL_HOST=localhost
export MYSQL_USER=guopengfei_learning
export MYSQL_PASSWORD=Gpf_learning
export MYSQL_DB=nginx_shop
```

3. **å¯åŠ¨ Flask å¼€å‘æœåŠ¡å™¨**

```bash
# æ–¹å¼1: ç›´æ¥è¿è¡Œï¼ˆæ¨èï¼‰
python -m flask_app.app

# æ–¹å¼2: ä½¿ç”¨ Flask CLI
export FLASK_APP=flask_app.app
export FLASK_ENV=development
flask run --host=0.0.0.0 --port=5000

# æ–¹å¼3: è¿›å…¥ç›®å½•è¿è¡Œ
cd flask_app
python app.py
```

### ä¿®æ”¹ä»£ç åé‡æ–°éƒ¨ç½²

```bash
# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# ä»…é‡æ–°æ„å»ºç‰¹å®šæœåŠ¡
docker-compose build flask-app
docker-compose up -d flask-app
```

### ä¿®æ”¹ Nginx é…ç½®

ä¿®æ”¹ `nginx/nginx.conf` åï¼š
```bash
# Nginx ä½¿ç”¨å®˜æ–¹é•œåƒï¼Œé…ç½®é€šè¿‡ volumes æŒ‚è½½ï¼Œç›´æ¥é‡å¯å³å¯ç”Ÿæ•ˆ
docker-compose restart nginx
```

### ä»£ç ç»“æ„è¯´æ˜

é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œä¸»è¦æ¨¡å—è¯´æ˜ï¼š

- **`config.py`**: é…ç½®ç®¡ç†ï¼Œæ”¯æŒå¼€å‘/ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢
- **`models.py`**: æ•°æ®åº“æ¨¡å‹å®šä¹‰ï¼ˆUser, ApiKey, TokenUsageï¼‰
- **`database.py`**: æ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†
- **`utils.py`**: è¾…åŠ©å‡½æ•°ï¼ˆå¦‚ `get_current_user()`, `require_login` è£…é¥°å™¨ï¼‰
- **`routes/`**: è·¯ç”±æ¨¡å—ï¼Œä½¿ç”¨ Blueprint ç»„ç»‡
  - `auth.py`: ç™»å½•/ç™»å‡º
  - `chat.py`: èŠå¤©é¡µé¢
  - `dashboard.py`: ç”¨æˆ·ä»ªè¡¨æ¿
  - `admin.py`: ç®¡ç†åå°
  - `api.py`: API æ¥å£
- **`services/`**: ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚
  - `auth_service.py`: è®¤è¯ä¸šåŠ¡é€»è¾‘
  - `chat_service.py`: èŠå¤©ä¸šåŠ¡é€»è¾‘ï¼ˆAPI è°ƒç”¨ã€Token è®°å½•ï¼‰
  - `stats_service.py`: ç»Ÿè®¡ä¸šåŠ¡é€»è¾‘

### æ•°æ®åº“æ“ä½œ

```bash
# è¿›å…¥ MySQL å®¹å™¨
docker-compose exec mysql mysql -u guopengfei_learning -pGpf_learning nginx_shop

# å¤‡ä»½æ•°æ®åº“
docker-compose exec mysql mysqldump -u guopengfei_learning -pGpf_learning nginx_shop > backup.sql

# æ¢å¤æ•°æ®åº“
docker-compose exec -T mysql mysql -u guopengfei_learning -pGpf_learning nginx_shop < backup.sql
```

## éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

### æœåŠ¡å™¨è¦æ±‚

- Linux æœåŠ¡å™¨ï¼ˆæ¨è Ubuntu 20.04+ï¼‰
- Docker å’Œ Docker Compose å·²å®‰è£…
- åŸŸåå·²è§£æåˆ°æœåŠ¡å™¨ IP
- SSL è¯ä¹¦å·²å‡†å¤‡

### éƒ¨ç½²æ­¥éª¤

1. **ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åˆ°æœåŠ¡å™¨**

```bash
scp -r nginx-shop user@server:/path/to/
```

2. **é…ç½® SSL è¯ä¹¦**

å°†è¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ° `ssl/guopengfei.top/` ç›®å½•ã€‚

3. **ä¿®æ”¹é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰**

- ä¿®æ”¹ `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„
- ä¿®æ”¹ `nginx/nginx.conf` ä¸­çš„åŸŸå
- ä¿®æ”¹æ•°æ®åº“å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯

4. **å¯åŠ¨æœåŠ¡**

```bash
cd /path/to/nginx-shop
docker-compose up -d
```

5. **é…ç½®é˜²ç«å¢™**

```bash
# å¼€æ”¾ 80 å’Œ 443 ç«¯å£
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
```

6. **æŸ¥çœ‹æ—¥å¿—**

```bash
docker-compose logs -f
```

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·å‚è€ƒ `docs/éƒ¨ç½²æŒ‡å—.md`ã€‚

## é…ç½®è¯´æ˜

### Nginx é…ç½®

ä¸»è¦é…ç½®é¡¹ï¼š
- **é•œåƒ**: nginx:alpineï¼ˆå®˜æ–¹é•œåƒï¼Œæ— éœ€æ„å»ºï¼‰
- **é…ç½®æŒ‚è½½**: `nginx/nginx.conf` é€šè¿‡ volumes æŒ‚è½½ï¼Œä¿®æ”¹åé‡å¯å³å¯ç”Ÿæ•ˆ
- **ç›‘å¬ç«¯å£**: 80 (HTTP), 443 (HTTPS)
- **SSL åè®®**: TLSv1.2, TLSv1.3
- **Gzip å‹ç¼©**: å·²å¯ç”¨
- **é™æ€æ–‡ä»¶ç¼“å­˜**: 30 å¤©
- **åå‘ä»£ç†**: è½¬å‘åˆ° Flask åº”ç”¨ (flask-app:5000)

### Flask åº”ç”¨é…ç½®

- **æ¶æ„**: æ¨¡å—åŒ–è®¾è®¡ï¼Œåº”ç”¨å·¥å‚æ¨¡å¼
- **è¿è¡Œç«¯å£**: 5000 (å®¹å™¨å†…)
- **WSGI æœåŠ¡å™¨**: Gunicorn (4 workers)
- **æ•°æ®åº“**: MySQL (é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®)
- **Session**: åŸºäº Flask Session
- **è·¯ç”±**: Blueprint æ¨¡å—åŒ–è·¯ç”±
- **æœåŠ¡å±‚**: ä¸šåŠ¡é€»è¾‘åˆ†ç¦»åˆ° services ç›®å½•

### MySQL é…ç½®

- **ç‰ˆæœ¬**: MySQL 8.0
- **æ•°æ®æŒä¹…åŒ–**: Docker Volume
- **åˆå§‹åŒ–è„šæœ¬**: `mysql/init.sql`

## API ç«¯ç‚¹

### ç”¨æˆ·ç›¸å…³
- `GET /` - é¦–é¡µï¼ˆè‡ªåŠ¨é‡å®šå‘ï¼‰
- `GET /login` - ç™»å½•é¡µé¢
- `POST /login` - å¤„ç†ç™»å½•
- `GET /logout` - ç™»å‡º
- `GET /chat` - èŠå¤©é¡µé¢
- `GET /dashboard` - ç”¨æˆ·ä»ªè¡¨æ¿
- `GET /admin` - ç®¡ç†åå°

### API æ¥å£
- `POST /api/chat` - AI èŠå¤©æ¥å£
- `POST /admin/api_key` - æ›´æ–° API Key

## å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç”Ÿäº§ç¯å¢ƒé…ç½®**
   - ä¿®æ”¹é»˜è®¤å¯†ç 
   - ä½¿ç”¨å¼ºå¯†ç ç­–ç•¥
   - å®šæœŸæ›´æ–°ä¾èµ–åŒ…
   - é…ç½®é˜²ç«å¢™è§„åˆ™

2. **SSL è¯ä¹¦**
   - ä½¿ç”¨æœ‰æ•ˆçš„ SSL è¯ä¹¦
   - å®šæœŸæ›´æ–°è¯ä¹¦
   - é…ç½®è¯ä¹¦è‡ªåŠ¨ç»­æœŸï¼ˆå¦‚ä½¿ç”¨ Let's Encryptï¼‰

3. **API Key ç®¡ç†**
   - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API Key
   - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
   - å®šæœŸè½®æ¢ API Key

4. **æ•°æ®åº“å®‰å…¨**
   - ä½¿ç”¨å¼ºå¯†ç 
   - é™åˆ¶æ•°æ®åº“è®¿é—®æƒé™
   - å®šæœŸå¤‡ä»½æ•°æ®

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **å®¹å™¨æ— æ³•å¯åŠ¨**
   ```bash
   # æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   docker-compose logs
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tulpn | grep :80
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥ MySQL å®¹å™¨çŠ¶æ€
   docker-compose ps mysql
   # æŸ¥çœ‹ MySQL æ—¥å¿—
   docker-compose logs mysql
   ```

3. **SSL è¯ä¹¦é”™è¯¯**
   - æ£€æŸ¥è¯ä¹¦æ–‡ä»¶è·¯å¾„å’Œæƒé™
   - ç¡®è®¤è¯ä¹¦æ–‡ä»¶æ ¼å¼æ­£ç¡®
   - æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—

4. **API è°ƒç”¨å¤±è´¥**
   - æ£€æŸ¥ API Key æ˜¯å¦é…ç½®
   - æŸ¥çœ‹ Flask åº”ç”¨æ—¥å¿—
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸

## æ–‡æ¡£

é¡¹ç›®æ–‡æ¡£ä½äº `docs/` ç›®å½•ï¼š
- `éƒ¨ç½²æŒ‡å—.md` - è¯¦ç»†éƒ¨ç½²è¯´æ˜
- `SSLè¯ä¹¦ä½¿ç”¨æŒ‡å—.md` - SSL è¯ä¹¦é…ç½®æŒ‡å—
- `SSLæŠ€æœ¯åŸç†è¯¦è§£.md` - SSL æŠ€æœ¯åŸç†
- `åŸŸåé…ç½®æŒ‡å—.md` - åŸŸåé…ç½®è¯´æ˜

## TODO / å¼€å‘è®¡åˆ’

ä»¥ä¸‹æ˜¯è®¡åˆ’ä¸­çš„åŠŸèƒ½æ”¹è¿›å’Œä¼˜åŒ–ï¼š

1. **é›†æˆ Redis ç¼“å­˜**
   - æ·»åŠ  Redis æœåŠ¡åˆ° Docker Compose
   - å°† Flask Session ä»é»˜è®¤å­˜å‚¨è¿ç§»åˆ° Redis
   - æå‡ Session ç®¡ç†çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§
   - æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²æ—¶çš„ Session å…±äº«

2. **å®ç°æµå¼èŠå¤©å“åº”**
   - ä¿®æ”¹ `/api/chat` æ¥å£æ”¯æŒæµå¼è¾“å‡º
   - å‰ç«¯å®ç° Server-Sent Events (SSE) æˆ– WebSocket æ¥æ”¶æµå¼æ•°æ®
   - ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå®ç°æ‰“å­—æœºæ•ˆæœ
   - å‡å°‘ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼Œæå‡äº¤äº’ä½“éªŒ

3. **API è®¿é—®é¢‘ç‡é™åˆ¶**
   - ä½¿ç”¨ Redis å®ç°èŠå¤© API è®¿é—®é¢‘ç‡é™åˆ¶
   - é™åˆ¶è§„åˆ™ï¼š1 åˆ†é’Ÿå†…æœ€å¤šè®¿é—® 5 æ¬¡
   - åŸºäºç”¨æˆ· ID æˆ– IP åœ°å€è¿›è¡Œé™æµ
   - è¿”å›å‹å¥½çš„é”™è¯¯æç¤ºä¿¡æ¯

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ ç›®çš„ã€‚

## æ›´æ–°æ—¥å¿—

### v2.0 - æ¶æ„é‡æ„ï¼ˆæœ€æ–°ï¼‰

**é‡å¤§æ”¹è¿›**:
- âœ¨ **æ¨¡å—åŒ–æ¶æ„é‡æ„**: é‡‡ç”¨åº”ç”¨å·¥å‚æ¨¡å¼å’Œ Blueprint è·¯ç”±æ¨¡å—åŒ–
- ğŸ“ **ä»£ç ç»„ç»‡ä¼˜åŒ–**: 
  - è·¯ç”±æŒ‰åŠŸèƒ½æ‹†åˆ†åˆ° `routes/` ç›®å½•
  - ä¸šåŠ¡é€»è¾‘å°è£…åˆ° `services/` ç›®å½•
  - é…ç½®ã€æ¨¡å‹ã€æ•°æ®åº“ç®¡ç†ç‹¬ç«‹æ¨¡å—
- ğŸ³ **Docker ä¼˜åŒ–**: 
  - ç§»é™¤ Nginx Dockerfileï¼Œç›´æ¥ä½¿ç”¨å®˜æ–¹ nginx:alpine é•œåƒ
  - é…ç½®é€šè¿‡ volumes æŒ‚è½½ï¼Œä¾¿äºå¼€å‘æ—¶ä¿®æ”¹
- ğŸ—‘ï¸ **æ¸…ç†å†—ä½™**: åˆ é™¤ä¸å†éœ€è¦çš„ `html/` é™æ€æ–‡ä»¶å¤¹

**æŠ€æœ¯æ”¹è¿›**:
- åº”ç”¨å·¥å‚æ¨¡å¼ (`create_app()`)
- Blueprint è·¯ç”±æ¨¡å—åŒ–
- æœåŠ¡å±‚åˆ†ç¦»ï¼ˆService Layer Patternï¼‰
- ç»Ÿä¸€çš„æ•°æ®åº“ä¼šè¯ç®¡ç†
- é…ç½®é›†ä¸­ç®¡ç†ï¼Œæ”¯æŒç¯å¢ƒåˆ‡æ¢

### v1.0 - åˆå§‹ç‰ˆæœ¬

- é›†æˆ Flask åç«¯æ¡†æ¶
- æ·»åŠ  MySQL æ•°æ®åº“æ”¯æŒ
- é›†æˆ DeepSeek AI èŠå¤©åŠŸèƒ½
- å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- æ·»åŠ  Token ä½¿ç”¨ç»Ÿè®¡
- é…ç½® Nginx åå‘ä»£ç†
- æ”¯æŒ HTTPS/SSL

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) è®¸å¯è¯ã€‚

### MIT License è¯´æ˜

MIT License æ˜¯ä¸€ä¸ªéå¸¸å®½æ¾çš„å¼€æºè®¸å¯è¯ï¼Œå…è®¸ä»–äººè‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘ä½ çš„ä»£ç ï¼Œåªéœ€ä¿ç•™åŸå§‹çš„ç‰ˆæƒå£°æ˜å’Œè®¸å¯è¯æ–‡æœ¬ã€‚

**å…è®¸çš„è¡Œä¸ºï¼š**
- âœ… å•†ä¸šä½¿ç”¨
- âœ… ä¿®æ”¹ä»£ç 
- âœ… åˆ†å‘ä»£ç 
- âœ… ç§äººä½¿ç”¨
- âœ… ä½¿ç”¨ä¸“åˆ©

**å”¯ä¸€è¦æ±‚ï¼š**
- ğŸ“ ä¿ç•™åŸå§‹çš„ç‰ˆæƒå£°æ˜å’Œ MIT License æ–‡æœ¬

**ä¸è¦æ±‚ï¼š**
- âŒ å…¬å¼€ä¿®æ”¹åçš„æºä»£ç 
- âŒ ä½¿ç”¨ç›¸åŒçš„è®¸å¯è¯
- âŒ æä¾›æ–‡æ¡£

è¯¦ç»†è®¸å¯è¯å†…å®¹è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
